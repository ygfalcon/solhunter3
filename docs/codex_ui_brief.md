# Codex UI Wiring Brief

To bring the primary UI online, stop hard-coding websocket endpoints and derive a single `WS_BASE` from `window.location.host`, preserving the appropriate `ws://` vs `wss://`, then aim the three sockets at `/ws/rl`, `/ws/events`, and `/ws/logs` through the runtime instead of falling back to `ws://127.0.0.1:8779`; expose those paths from the runtime (or via a slim reverse proxy) to the orchestrator’s assigned ports (e.g., `rl=58202`, `events=58203`, `logs=58204`), or preferably lock them to stable ports via `RL_WS_PORT`, `EVENTS_WS_PORT`, and `LOGS_WS_PORT` and make the UI fetch a single `/api/manifest` JSON at boot that returns `{ ui_port, rl_ws, events_ws, logs_ws }` so React never guesses; replace the Flask dev server/reloader with a lone production instance so only one process binds (the “Requested UI port 5001 unavailable; using 58205” line means the SPA is pointed at the wrong host/port), add minimal empty states that show placeholders until streams hydrate and inline connection errors like “Events stream disconnected — retrying,” gate widgets on the first data tick so charts render from cached state before sockets connect, throttle rendering and log ingestion to 10–20 Hz with debounced store updates, and double-check CORS/Origin handling for `wss://` when serving the UI over HTTPS so the screen lights up immediately even if price/providers are flaky.
